<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Estadística y Econometría Espacial con R, Módulo II</title>
    <meta charset="utf-8" />
    <meta name="date" content="2024-09-17" />
    <script src="libs/header-attrs-2.27/header-attrs.js"></script>
    <link rel="stylesheet" href="tema_ergos.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">


class: title-slide center middle
background-image: url(img/portada_nb.png)
background-size: 110%

## Estadística y Econometría Espacial con R, Módulo II
### Clase 1:  ¿Por qué es importante el modelamiento espacial?


---
background-image: url(img/slide_nb.png)
background-position: top left
background-size: 140%
padding-top: 150px
class: top left



## Ciencia Abierta y Reproducible con R

### R y la Filosofía de la Ciencia Abierta y Reproducible

.pull-left[
  - **R y el Código Abierto**:
    - R, desarrollado en 1993 por Ross Ihaka y Robert Gentleman, es un lenguaje de programación de código abierto enfocado en el análisis estadístico.
    - Promueve la transparencia y colaboración, permitiendo a los investigadores compartir y reproducir análisis fácilmente.
  - **Importancia de la Reproducibilidad**:
    - La reproducibilidad es esencial para validar resultados y avanzar en el conocimiento científico.
    - R facilita la documentación y distribución de código, fortaleciendo la integridad científica.
]

.pull-right[

! Foto de Ihaca Gentleman
]


- **Referencias**:
  - Ihaka, R., &amp; Gentleman, R. (1996). *R: A Language for Data Analysis and Graphics*. **Journal of Computational and Graphical Statistics**, 5(3), 299-314.

---

**Diapositiva 2: Evolución de la Estadística hacia la Econometría Espacial**

- **Título**: **Incorporando el Espacio en el Modelamiento Estadístico**

- **Contenido**:
  - **Línea de Tiempo de Avances Clave**:
    - **1950s-1960s**: Fundamentos de la econometría clásica.
    - **1970s**: Surgimiento de la econometría espacial.
    - **1988**: Publicación de *Spatial Econometrics: Methods and Models* por Luc Anselin.
    - **1990s-2000s**: Integración de SIG y datos geoespaciales en análisis económicos.
    - **Actualidad**: Uso de Big Data y aprendizaje automático en contextos espaciales.
  - **Áreas de Aplicación Importantes**:
    - **Planificación Urbana**: Análisis de distribución de recursos y servicios.
    - **Economía Regional**: Estudio de interdependencias entre regiones.
    - **Salud Pública**: Mapeo de enfermedades y recursos sanitarios.
  - **Casos Importantes**:
    - **Análisis de Disparidades Regionales**: [Ejemplo de estudio](https://doi.org/10.1016/j.regsciurbeco.2018.03.007)
    - **Modelamiento de Datos Geoespaciales**: Aplicaciones en agricultura y medio ambiente.

- **Referencias**:
  - Anselin, L. (1988). *Spatial Econometrics: Methods and Models*. **Kluwer Academic Publishers**.
  - LeSage, J., &amp; Pace, R. K. (2009). *Introduction to Spatial Econometrics*. **CRC Press**.

---

**Diapositiva 3: Tecnología, Actualización Continua y Herramientas Reproducibles**

- **Título**: **El Rol de la Tecnología y la Comunidad R en el Análisis Espacial**

- **Contenido**:
  - **Avances Tecnológicos**:
    - La rápida evolución tecnológica aumenta la capacidad y eficiencia en el análisis de datos.
    - Necesidad de actualización constante para mantenerse al día con nuevas metodologías y herramientas.
  - **Planificación y Política Basada en Datos**:
    - Importancia de utilizar herramientas reproducibles para asegurar decisiones informadas y eficaces.
    - Garantizar la calidad y transparencia en el manejo de datos para políticas públicas.
  - **Ecosistema Tidyverse y RStudio**:
    - **Tidyverse**: Colección de paquetes de R para ciencia de datos que promueven una sintaxis coherente y funcional.
    - **RStudio**: Entorno de desarrollo integrado que facilita la programación en R y la gestión de proyectos reproducibles.
    - **Beneficios**:
      - Simplificación de tareas complejas en manipulación y visualización de datos.
      - Fomento de buenas prácticas y estandarización en el análisis.
  - **Recursos Comunitarios**:
    - [Página oficial de Tidyverse](https://www.tidyverse.org/)
    - [RStudio](https://posit.co/downloads/)

- **Mensaje Final**:
  - Integrarse y contribuir a la comunidad de R fortalece nuestras habilidades y la calidad de nuestro trabajo analítico.


---

background-image: url(img/slide_nb.png)
background-position: top left
background-size: 140%
padding-top: 150px
class: top left

## Conceptos claves del analisis espacial

Tipos de objeto espacial
- Puntos
- Lineas 
- Poligonos


---

background-image: url(img/slide_nb.png)
background-position: top left
background-size: 140%
padding-top: 150px
class: top left

## Conceptos claves del analisis eestadistico de datos

Analisis de datos
- Reproducibilidad
- Limpieza de datos 
- El flujo del modelamiento y comunicacion con datos
---

background-image: url(img/slide_nb.png)
background-position: top left
background-size: 140%
padding-top: 150px
class: top left


## Niveles de la Modelización Econométrica Espacial

La modelización econométrica espacial es compleja y debe ser abordada desde múltiples niveles:

- **Teoría de la Estimación:** Implica la consideración de clases de estimadores y sus propiedades.
- **Construcción de Modelos Teóricos:** Basados en la teoría económica, se seleccionan variables y se determina la forma del modelo.
- **Técnicas de Estimación:** Incluye la evaluación del ajuste, la calidad del modelo y la selección del mejor modelo.
- **Interpretación de Modelos:** Analiza tanto el tamaño y la significancia de los coeficientes obtenidos como la traducción de los resultados en fenómenos y mecanismos discutidos en la teoría.

---
background-image: url(img/slide_nb.png)
background-position: top left
background-size: 140%
padding-top: 150px
class: top left

## Consideraciones en la Modelización

Al iniciar la modelización espacial econométrica, en la que necesariamente se dan **variables dependientes y exógenas**, hay que tener en cuenta las **fuentes de dependencia espacial y de heterogeneidad espacial**.

- **Flujos Interregionales:** Como el comercio o la transferencia de conocimientos.
- **Variables Omitidas:** Factores no observados, como diversos servicios de localización o agrupaciones, que afectan a una variable dependiente y correlacionada espacialmente.
- **Errores de Medición:** O heterogeneidad no observada, resultado de límites administrativos que no son coherentes con la naturaleza de los procesos espaciales estudiados.

---
background-image: url(img/slide_nb.png)
background-position: top left
background-size: 140%
padding-top: 150px
class: top left

### ¿Qué pasa si se omite la dimensión espacial cuando los datos tienen una naturaleza espacial?

- La homostacidad se da a nivel de grupos en los que tu puedes dividir la poblacion 
- tienes que gaarntizas que en la rregresion lineal pase eso
- En principio, todos los datos que pueden ser geolocalizados tienen una naturaleza espacial, lo que implica la presencia de autocorrelación espacial (los valores en ubicaciones cercanas están correlacionados), la heterogeneidad espacial (las propiedades de los datos varían de un lugar a otro) y la heterocedasticidad (la variabilidad de los datos no es constante).
- Cuando se omite la dimensión espacial, especialmente en la variable dependiente (la que se está tratando de predecir o explicar), se rompen las suposiciones del modelo de regresión lineal clásico, que asume independencia entre las observaciones.
- Los errores en el modelo no tendrán una covarianza de cero (no estarán distribuidos al azar), ya que a menudo mostrarán un "error espacial", lo que significa que los errores en lugares cercanos estarán correlacionados.
- En consecuencia  si se omite una variable espacial significativa, como el "retardo espacial" de la variable dependiente o de una variable explicativa, esto lleva a un error en la especificación del modelo (modelo incorrectamente especificado).
- Además, si un modelo econométrico necesita incluir un retardo espacial de la variable dependiente pero se estima usando un método típico que no considera el espacio (como Mínimos Cuadrados Ordinarios, OLS), los estimadores (valores que se usan para hacer predicciones) serán sesgados (no representarán correctamente la realidad) y sobreestimados (los efectos parecerán más grandes de lo que son en realidad) e inconsistentes (no se acercarán al valor verdadero al aumentar el tamaño de la muestra).

---
background-image: url(img/slide_nb.png)
background-position: top left
background-size: 140%
padding-top: 150px
class: top left

## Métodos para Abordar la Dependencia Espacial

En presencia de dependencia o heterogeneidad espacial, hay varias formas de abordar este problema. 

- **Uso de Datos en Diferentes Escalas Espaciales:** Como datos puntuales o agregados o datos por división administrativa o en una cuadrícula.
- **Incluir variables que aproximen fenómenos espaciales no observados:** Como variables dummy (cero-uno) o variables que se asemejan a la distribución espacial del error.
- **Incluir Coordenadas Geográficas:** Como variables explicativas.
- **Estimación en Grupos Homogéneos:** Modelos en "clubs" que muestran homogeneidad interna.
- **Selección de Métodos de Estimación Espacial Adecuados:** Incluyendo la elección de matrices de pesos espaciales y la especificación del modelo.



background-image: url(img/slide_nb.png)
background-position: top left
background-size: 140%
padding-top: 150px
class: top left

## Clases Importantes de Modelos en Aplicaciones Económicas

- **Modelos de Dependencia Espacial:** Usados como alternativas espaciales a los modelos de regresión lineal típicos.
- **Modelos de Interacción Espacial:** Unidireccionales, que modelan el flujo de un fenómeno desde un núcleo a la periferia.
- **Modelos de Convergencia:** Analizan cómo el cambio en la variable dependiente se relaciona con su estado inicial y otras variables exógenas.
- **Modelos de Panel de Tiempo Transversal:** Donde las unidades estudiadas están geolocalizadas y hay relaciones espaciales entre ellas.
- **Modelos Acumulativos Espaciales:** Basados en el concepto financiero de valor presente neto, evaluando variables monetarias y de estado en una ventana temporal expandida.:

&gt; Poner las formulas muy sencillo

---
background-image: url(img/slide_nb.png)
background-position: top left
background-size: 140%
padding-top: 150px
class: top left

# Practica:

- Como Bajarse la geodatabase
- Un moran con una variable construida por nosostros

---
background-image: url(img/slide_nb.png)
background-position: top left
background-size: 140%
padding-top: 150px
class: top left

## Construcción de Modelos Econométricos Espaciales

El proceso de construir un buen modelo econométrico requiere considerar varios aspectos:

- **Clase del Modelo:** Según el propósito del estudio y la disponibilidad de datos.
- **Método de Estimación:** Considerando variables espaciales.
- **Especificación del Modelo:** Identificación de las variables probadas en la hipótesis y el control.

---

## Matrices de vecindad

Una matriz de vecindad es una matriz cuadrada que representa las relaciones espaciales entre diferentes unidades geográficas. Cada fila y cada columna de la matriz corresponden a una unidad espacial, como un municipio, una parcela de terreno o una celda en una cuadrícula. Los elementos de la matriz indican la relación o la proximidad entre las unidades.

**Componentes Generales:**

- **Filas y Columnas:** Cada fila y columna representan una unidad espacial. Por ejemplo, en un estudio de municipios, cada fila y columna corresponden a un municipio.
- **Elementos de la Matriz:** Los elementos en la matriz representan la relación de vecindad entre las unidades. Dependiendo del tipo de matriz, esto puede ser una indicación binaria (vecino o no vecino) o una medida de proximidad.

---
background-image: url(img/slide_nb.png)
background-position: top left
background-size: 140%
padding-top: 150px
class: top left

## Matrices de vecindad

### Tipos Comunes de Matrices de Vecindad:

- **Matriz Binaria:** Indica si una unidad es vecina de otra (0 o 1).
- **Matriz de Distancia:** Utiliza distancias reales entre unidades como elementos de la matriz.
- **Matriz de Contigüidad:** Basada en la contigüidad espacial entre unidades.

---
background-image: url(img/slide_nb.png)
background-position: top left
background-size: 140%
padding-top: 150px
class: top left


## Autocorrelación Espacial

La autocorrelación espacial se utiliza para describir en qué medida una variable está correlacionada consigo misma a través del espacio. La autocorrelación espacial positiva se produce cuando las observaciones con valores similares están más próximas entre sí (es decir, agrupadas). La autocorrelación espacial negativa se produce cuando las observaciones con valores distintos están más próximas entre sí (es decir, dispersas)

![](https://www.researchgate.net/publication/345326470/figure/fig4/AS:960053502804001@1605906000766/Conceptual-models-of-spatial-autocorrelation-Positive-spatial-autocorrelation-a-is.png){fig-align="center" width="80%"}

La autocorrelación espacial puede evaluarse utilizando índices que resumen el grado en que observaciones similares tienden a producirse cerca unas de otras en el área de estudio. Dos índices comunes que se utilizan para evaluar la autocorrelación espacial en datos areales son el **índice global de Moran I y la C de Geary.**

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "solarized-light",
"highlightLines": true,
"countIncrementalSlides": false,
"tokenTransform": {
"functionCall": "class=\"function-call\""
}
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
